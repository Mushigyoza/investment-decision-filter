<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•·æœŸæŠ•è³‡éæ¿¾å™¨</title>
    <style>
        /* --- 1. è‡ªè¨‚å­—é«”è¨­å®šå€ --- */
        @font-face {
            font-family: 'MyCustomFont';
            src: url('myfont.ttf'); 
        }

        :root {
            --primary: #5f6c7b;       
            --bg: #f4f1ea;            
            --container-bg: #ffffff;  
            --main-btn: #9d8189;      
            --main-btn-hover: #8e737b;
            --accent-blue: #a4b4b4;   
            --status-over: #e5989b;   
            --status-under: #e6b8a2;  
            --status-good: #84a59d;   
            --table-head: #e8e4dc;    
            --border: #e0deda;
        }

        body {
            font-family: 'MyCustomFont', "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg);
            color: var(--primary);
            margin: 0; padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(157, 129, 137, 0.1);
        }

        h1 { 
            text-align: center; 
            color: #6d597a; 
            border-bottom: 2px dashed var(--border); 
            padding-bottom: 20px; 
            margin-bottom: 30px; 
            font-weight: 800; 
            letter-spacing: 2px;
            font-size: 2.2em;
        }
        
        .total-banner {
            background: #6d6875; 
            color: #fff; 
            padding: 20px; 
            border-radius: 15px;
            margin-bottom: 30px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }

        .dashboard {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px; 
            margin-bottom: 40px;
        }
        .card { 
            padding: 20px; 
            border-radius: 15px; 
            background: #fff; 
            border: 1px solid var(--border);
            border-left: 6px solid #ccc; 
            transition: transform 0.2s;
        }
        .card.over { border-left-color: var(--status-over); background: #fff5f5; }
        .card.under { border-left-color: var(--status-under); background: #fffcf9; }
        .card.good { border-left-color: var(--status-good); background: #f4f9f6; }

        .card .val { font-size: 1.8em; font-weight: bold; margin: 5px 0; color: #555; }
        .card .status { font-size: 0.9em; margin-top: 8px; font-weight: bold; }

        h3 { color: #6d597a; margin-top: 0; font-weight: 700; }
        .table-container { 
            overflow-x: auto; 
            background: #fff; 
            border-radius: 15px; 
            border: 1px solid var(--border);
            padding: 5px;
        }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: var(--table-head); color: #666; text-align: left; padding: 15px; font-size: 0.9em; }
        td { padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
        
        input, select {
            width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; 
            background: #fbfbfb; color: #555; font-family: inherit;
        }

        .btn-add {
            background: #f2e9e4; color: #7d6e6e; border: 1px dashed #d6ccc2; 
            width: 100%; padding: 12px; margin-top: 15px; border-radius: 10px;
            font-weight: 600; cursor: pointer; font-family: inherit;
        }
        
        .btn-main {
            background: var(--main-btn); color: white; border: none; padding: 18px;
            font-size: 1.2em; border-radius: 12px; cursor: pointer; width: 100%; 
            margin-top: 40px; font-weight: bold; font-family: inherit;
        }

        /* --- 2:8 æ¯”ä¾‹å„ªåŒ–å€å¡Š --- */
        #quiz-section { 
            display: none; margin-top: 50px; 
            border-top: 2px dashed var(--border); padding-top: 30px; 
        }
        .q-item { margin-bottom: 25px; }
        .q-item p { font-weight: 800; color: #6d597a; margin-bottom: 15px; font-size: 1.1em; }
        
        .option-label {
            display: flex;
            align-items: center;
            padding: 18px;
            margin-bottom: 12px;
            background: #f9f7f5;
            border: 1px solid #eee;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option-label:hover { background: #fff; border-color: var(--main-btn); }
        
        /* æ¯”ä¾‹åˆ†é…ï¼šå·¦å´åœ“åœˆä½” 20%ï¼Œå³å´æ–‡å­—ä½” 80% */
        .option-label input[type="radio"] {
            flex: 2; /* æ¯”ä¾‹ 2 */
            transform: scale(1.6);
            margin: 0;
            cursor: pointer;
            accent-color: var(--main-btn);
        }
        .option-label span {
            flex: 8; /* æ¯”ä¾‹ 8 */
            padding-left: 10px;
            font-weight: 500;
        }

        #final-result {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%; padding: 25px;
            text-align: center; z-index: 999; font-weight: bold; font-size: 1.1em; font-family: inherit;
        }
        .res-stop { background: #fae1dd; color: #b56576; border-top: 5px solid var(--status-over); }
        .res-go { background: #e6f2ee; color: #4a7c59; border-top: 5px solid var(--status-good); }
    </style>
</head>
<body>

<div class="container">
    <h1>é•·æœŸæŠ•è³‡éæ¿¾å™¨</h1>

    <div class="total-banner">
        <span>äº¤æ˜“å¾Œé ä¼°ç¸½è³‡ç”¢</span>
        <span style="font-size: 1.6em; font-weight: bold;" id="total-assets">$ 0</span>
    </div>

    <div class="dashboard">
        <div class="card" id="card-core">
            <h4>æ ¸å¿ƒé…ç½® <span class="target-label">40-50%</span></h4>
            <div class="val" id="pct-core">0%</div>
            <div class="amt" id="amt-core">$0</div>
            <div class="status" id="status-core">--</div>
        </div>
        <div class="card" id="card-global">
            <h4>å…¨çƒé…ç½® <span class="target-label">25-35%</span></h4>
            <div class="val" id="pct-global">0%</div>
            <div class="amt" id="amt-global">$0</div>
            <div class="status" id="status-global">--</div>
        </div>
        <div class="card" id="card-tech">
            <h4>ç§‘æŠ€é…ç½® <span class="target-label">15-25%</span></h4>
            <div class="val" id="pct-tech">0%</div>
            <div class="amt" id="amt-tech">$0</div>
            <div class="status" id="status-tech">--</div>
        </div>
        <div class="card" id="card-other">
            <h4>å…¶ä»–/å€‹è‚¡ <span class="target-label">â‰¤10%</span></h4>
            <div class="val" id="pct-other">0%</div>
            <div class="amt" id="amt-other">$0</div>
            <div class="status" id="status-other">--</div>
        </div>
    </div>

    <h3>æŒè‚¡æ˜ç´°èˆ‡äº¤æ˜“è©¦ç®—</h3>
    <div class="table-container">
        <table id="stock-table">
            <thead>
                <tr>
                    <th style="width: 15%;">ä»£è™Ÿ</th>
                    <th style="width: 20%;">æ­¸é¡</th>
                    <th style="width: 20%;">ç›®å‰åº«å­˜</th>
                    <th style="width: 20%;">åŠ ç¢¼ / è³£å‡º(-)</th>
                    <th style="width: 20%;">äº¤æ˜“å¾Œé‡‘é¡</th>
                    <th style="width: 5%;"></th>
                </tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>
    <button class="btn-add" onclick="addRow()">+ æ–°å¢ä¸€åˆ—è‚¡ç¥¨</button>

    <button class="btn-main" onclick="startCheck()">ç¢ºèªé…ç½®ï¼Œé€²å…¥å¿ƒç†æª¢æŸ¥</button>

    <div id="quiz-section">
        <h3>æœ€å¾Œä¸€æ­¥ï¼šæ±ºç­–å“è³ªæª¢æŸ¥</h3>
        <div class="q-item">
            <p>1. é€™å€‹äº¤æ˜“å‹•ä½œçš„ä¸»è¦å‹•æ©Ÿæ˜¯ï¼Ÿ</p>
            <label class="option-label">
                <input type="radio" name="q1" value="pass" onchange="checkResult()">
                <span>ç‚ºäº†è®“è³‡ç”¢æ¯”ä¾‹å›åˆ°ç›®æ¨™å€é–“ (å†å¹³è¡¡)</span>
            </label>
            <label class="option-label">
                <input type="radio" name="q1" value="stop" onchange="checkResult()">
                <span>è¦ºå¾—æŸæ”¯è‚¡ç¥¨è¦æ¼²äº†æƒ³è¿½ï¼Œæˆ–æ˜¯è·Œäº†æƒ³ç  (æƒ…ç·’)</span>
            </label>
        </div>
        <div class="q-item">
            <p>2. å£“åŠ›æ¸¬è©¦ï¼šå¦‚æœäº¤æ˜“å¾Œæ˜å¤©è·Œ 30%...</p>
            <label class="option-label">
                <input type="radio" name="q2" value="pass" onchange="checkResult()">
                <span>æˆ‘é‚„èƒ½ç¡å¾—è‘—ï¼Œç”Ÿæ´»ä¸å—å½±éŸ¿</span>
            </label>
            <label class="option-label">
                <input type="radio" name="q2" value="stop" onchange="checkResult()">
                <span>æˆ‘æœƒéå¸¸ç„¦æ…®ï¼Œç”šè‡³æƒ³åœæ</span>
            </label>
        </div>
        <div class="q-item">
            <p>3. é€™äº›éŒ¢çš„é–’ç½®æ™‚é–“ï¼Ÿ</p>
            <label class="option-label">
                <input type="radio" name="q3" value="pass" onchange="checkResult()">
                <span>10 å¹´ä»¥ä¸Šä¸æœƒç”¨åˆ°</span>
            </label>
            <label class="option-label">
                <input type="radio" name="q3" value="stop" onchange="checkResult()">
                <span>1-2 å¹´å…§å¯èƒ½æœƒæ‹¿ä¾†ç”¨</span>
            </label>
        </div>
    </div>
</div>

<div id="final-result">
    <div id="result-msg"></div>
</div>

<script>
    // JS é‚è¼¯ç¶­æŒä¸è®Š
    const RULES = { core: { min: 40, max: 50 }, global: { min: 25, max: 35 }, tech: { min: 15, max: 25 }, other: { min: 0, max: 10 } };
    window.onload = function() { addRow('006208', 'core'); addRow('VT', 'global'); };

    function addRow(defaultName = '', defaultCat = 'core') {
        const tbody = document.getElementById('table-body');
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><input type="text" placeholder="å¦‚ 2330" value="${defaultName}"></td>
            <td><select onchange="calc()"><option value="core" ${defaultCat==='core'?'selected':''}>æ ¸å¿ƒ (å¤§ç›¤)</option><option value="global" ${defaultCat==='global'?'selected':''}>å…¨çƒ (VT)</option><option value="tech" ${defaultCat==='tech'?'selected':''}>ç§‘æŠ€ (0052)</option><option value="other" ${defaultCat==='other'?'selected':''}>å…¶ä»– (å€‹è‚¡)</option></select></td>
            <td><input type="number" class="cur-val" placeholder="0" oninput="calc()"></td>
            <td><input type="number" class="trade-val" placeholder="0" oninput="calc()"></td>
            <td class="final-val" style="font-weight:bold; color:#6d597a;">0</td>
            <td style="text-align:center;"><button class="btn-del" onclick="removeRow(this)">âœ•</button></td>
        `;
        tbody.appendChild(tr);
    }

    function removeRow(btn) { btn.parentNode.parentNode.remove(); calc(); }

    function calc() {
        let totals = { core: 0, global: 0, tech: 0, other: 0 }, grandTotal = 0;
        document.querySelectorAll('#table-body tr').forEach(row => {
            const cat = row.querySelector('select').value, cur = parseFloat(row.querySelector('.cur-val').value) || 0, trade = parseFloat(row.querySelector('.trade-val').value) || 0;
            const final = cur + trade;
            row.querySelector('.final-val').innerText = final.toLocaleString();
            totals[cat] += final; grandTotal += final;
        });
        document.getElementById('total-assets').innerText = "$ " + grandTotal.toLocaleString();
        Object.keys(totals).forEach(type => updateCard(type, totals[type], grandTotal));
        checkResult(); 
    }

    function updateCard(type, amount, total) {
        const pct = total > 0 ? (amount / total * 100) : 0, rule = RULES[type], card = document.getElementById(`card-${type}`);
        document.getElementById(`pct-${type}`).innerText = pct.toFixed(1) + "%";
        document.getElementById(`amt-${type}`).innerText = "$ " + amount.toLocaleString();
        const elStatus = document.getElementById(`status-${type}`);
        card.className = "card"; 
        if (pct > rule.max) { card.classList.add('over'); elStatus.innerText = `âš ï¸ éé‡ (ä¸Šé™ ${rule.max}%)`; }
        else if (pct < rule.min) { card.classList.add('under'); elStatus.innerText = `ğŸ’¡ éè¼• (ä¸‹é™ ${rule.min}%)`; }
        else { card.classList.add('good'); elStatus.innerText = "âœ… æ¯”ä¾‹å®Œç¾"; }
    }

    function startCheck() {
        if (parseFloat(document.getElementById('total-assets').innerText.replace(/[$,]/g, '')) === 0) { alert("è«‹å…ˆè¼¸å…¥è³‡ç”¢æ•¸æ“šï¼"); return; }
        document.getElementById('quiz-section').style.display = 'block';
        setTimeout(() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }), 100);
    }

    function checkResult() {
        if (document.getElementById('quiz-section').style.display === 'none') return;
        const q1 = document.querySelector('input[name="q1"]:checked')?.value, q2 = document.querySelector('input[name="q2"]:checked')?.value, q3 = document.querySelector('input[name="q3"]:checked')?.value;
        const resDiv = document.getElementById('final-result'), msgDiv = document.getElementById('result-msg');
        if (q1 && q2 && q3) {
            resDiv.style.display = 'block';
            if ([q1, q2, q3].includes('stop')) { resDiv.className = 'res-stop'; msgDiv.innerHTML = "ğŸ›‘ ç·©ç·©å§ï¼šå¿ƒæ…‹æˆ–é¢¨éšªæ‰¿å—åº¦äº®ç´…ç‡ˆï¼Œè«‹å…ˆæš«åœäº¤æ˜“ã€‚"; }
            else { resDiv.className = 'res-go'; msgDiv.innerHTML = "âœ… é€šéï¼šé…ç½®ç†æ€§ä¸”å¿ƒæ…‹å¹³ç©©ï¼Œå¯ä»¥åŸ·è¡Œäº¤æ˜“ã€‚"; }
        } else { resDiv.style.display = 'none'; }
    }
</script>

</body>
</html>
